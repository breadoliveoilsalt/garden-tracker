<h1> Edit Garden: <%= @garden.name %> </h1>

<%= display_any_errors(@garden) %>

<%= form_for @garden do |f| %>

  <%= render partial: "gardens/form", locals: { f: f } %>

  <div>
    Edit existing plantings below or <%= link_to "add a new planting", new_garden_planting_path(@garden.id) %>:

    <div>
      <%= f.fields_for :plantings do | planting_attrib | %>

        <div>

          <%= planting_attrib.hidden_field :user_id, :value => current_user.id %>

          <%= render partial: 'plantings/form', locals: {planting_attrib: planting_attrib} %>

          <%= link_to "Click here to delete planting", garden_planting_path(@garden.id, planting_attrib.object.id), method: :delete, data: { confirm: 'Are you sure you want to delete this planting?' }%>

        </div>

      <% end %>

    </div>
  </div>

  <div>
    <%= f.submit "Submit" %>
  </div>

<% end %>
